<?xml version="1.0" encoding="UTF-8"?>
<transformation>
  <info>
    <name>AnimeETL-SHOWS-javascripttransform</name>
    <description/>
    <extended_description/>
    <trans_version/>
    <trans_type>Normal</trans_type>
    <trans_status>0</trans_status>
    <directory>&#x2f;</directory>
    <parameters>
    </parameters>
    <log>
<trans-log-table><connection/>
<schema/>
<table/>
<size_limit_lines/>
<interval/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>CHANNEL_ID</id><enabled>Y</enabled><name>CHANNEL_ID</name></field><field><id>TRANSNAME</id><enabled>Y</enabled><name>TRANSNAME</name></field><field><id>STATUS</id><enabled>Y</enabled><name>STATUS</name></field><field><id>LINES_READ</id><enabled>Y</enabled><name>LINES_READ</name><subject/></field><field><id>LINES_WRITTEN</id><enabled>Y</enabled><name>LINES_WRITTEN</name><subject/></field><field><id>LINES_UPDATED</id><enabled>Y</enabled><name>LINES_UPDATED</name><subject/></field><field><id>LINES_INPUT</id><enabled>Y</enabled><name>LINES_INPUT</name><subject/></field><field><id>LINES_OUTPUT</id><enabled>Y</enabled><name>LINES_OUTPUT</name><subject/></field><field><id>LINES_REJECTED</id><enabled>Y</enabled><name>LINES_REJECTED</name><subject/></field><field><id>ERRORS</id><enabled>Y</enabled><name>ERRORS</name></field><field><id>STARTDATE</id><enabled>Y</enabled><name>STARTDATE</name></field><field><id>ENDDATE</id><enabled>Y</enabled><name>ENDDATE</name></field><field><id>LOGDATE</id><enabled>Y</enabled><name>LOGDATE</name></field><field><id>DEPDATE</id><enabled>Y</enabled><name>DEPDATE</name></field><field><id>REPLAYDATE</id><enabled>Y</enabled><name>REPLAYDATE</name></field><field><id>LOG_FIELD</id><enabled>Y</enabled><name>LOG_FIELD</name></field><field><id>EXECUTING_SERVER</id><enabled>N</enabled><name>EXECUTING_SERVER</name></field><field><id>EXECUTING_USER</id><enabled>N</enabled><name>EXECUTING_USER</name></field><field><id>CLIENT</id><enabled>N</enabled><name>CLIENT</name></field></trans-log-table>
<perf-log-table><connection/>
<schema/>
<table/>
<interval/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>SEQ_NR</id><enabled>Y</enabled><name>SEQ_NR</name></field><field><id>LOGDATE</id><enabled>Y</enabled><name>LOGDATE</name></field><field><id>TRANSNAME</id><enabled>Y</enabled><name>TRANSNAME</name></field><field><id>STEPNAME</id><enabled>Y</enabled><name>STEPNAME</name></field><field><id>STEP_COPY</id><enabled>Y</enabled><name>STEP_COPY</name></field><field><id>LINES_READ</id><enabled>Y</enabled><name>LINES_READ</name></field><field><id>LINES_WRITTEN</id><enabled>Y</enabled><name>LINES_WRITTEN</name></field><field><id>LINES_UPDATED</id><enabled>Y</enabled><name>LINES_UPDATED</name></field><field><id>LINES_INPUT</id><enabled>Y</enabled><name>LINES_INPUT</name></field><field><id>LINES_OUTPUT</id><enabled>Y</enabled><name>LINES_OUTPUT</name></field><field><id>LINES_REJECTED</id><enabled>Y</enabled><name>LINES_REJECTED</name></field><field><id>ERRORS</id><enabled>Y</enabled><name>ERRORS</name></field><field><id>INPUT_BUFFER_ROWS</id><enabled>Y</enabled><name>INPUT_BUFFER_ROWS</name></field><field><id>OUTPUT_BUFFER_ROWS</id><enabled>Y</enabled><name>OUTPUT_BUFFER_ROWS</name></field></perf-log-table>
<channel-log-table><connection/>
<schema/>
<table/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>CHANNEL_ID</id><enabled>Y</enabled><name>CHANNEL_ID</name></field><field><id>LOG_DATE</id><enabled>Y</enabled><name>LOG_DATE</name></field><field><id>LOGGING_OBJECT_TYPE</id><enabled>Y</enabled><name>LOGGING_OBJECT_TYPE</name></field><field><id>OBJECT_NAME</id><enabled>Y</enabled><name>OBJECT_NAME</name></field><field><id>OBJECT_COPY</id><enabled>Y</enabled><name>OBJECT_COPY</name></field><field><id>REPOSITORY_DIRECTORY</id><enabled>Y</enabled><name>REPOSITORY_DIRECTORY</name></field><field><id>FILENAME</id><enabled>Y</enabled><name>FILENAME</name></field><field><id>OBJECT_ID</id><enabled>Y</enabled><name>OBJECT_ID</name></field><field><id>OBJECT_REVISION</id><enabled>Y</enabled><name>OBJECT_REVISION</name></field><field><id>PARENT_CHANNEL_ID</id><enabled>Y</enabled><name>PARENT_CHANNEL_ID</name></field><field><id>ROOT_CHANNEL_ID</id><enabled>Y</enabled><name>ROOT_CHANNEL_ID</name></field></channel-log-table>
<step-log-table><connection/>
<schema/>
<table/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>CHANNEL_ID</id><enabled>Y</enabled><name>CHANNEL_ID</name></field><field><id>LOG_DATE</id><enabled>Y</enabled><name>LOG_DATE</name></field><field><id>TRANSNAME</id><enabled>Y</enabled><name>TRANSNAME</name></field><field><id>STEPNAME</id><enabled>Y</enabled><name>STEPNAME</name></field><field><id>STEP_COPY</id><enabled>Y</enabled><name>STEP_COPY</name></field><field><id>LINES_READ</id><enabled>Y</enabled><name>LINES_READ</name></field><field><id>LINES_WRITTEN</id><enabled>Y</enabled><name>LINES_WRITTEN</name></field><field><id>LINES_UPDATED</id><enabled>Y</enabled><name>LINES_UPDATED</name></field><field><id>LINES_INPUT</id><enabled>Y</enabled><name>LINES_INPUT</name></field><field><id>LINES_OUTPUT</id><enabled>Y</enabled><name>LINES_OUTPUT</name></field><field><id>LINES_REJECTED</id><enabled>Y</enabled><name>LINES_REJECTED</name></field><field><id>ERRORS</id><enabled>Y</enabled><name>ERRORS</name></field><field><id>LOG_FIELD</id><enabled>N</enabled><name>LOG_FIELD</name></field></step-log-table>
<metrics-log-table><connection/>
<schema/>
<table/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>CHANNEL_ID</id><enabled>Y</enabled><name>CHANNEL_ID</name></field><field><id>LOG_DATE</id><enabled>Y</enabled><name>LOG_DATE</name></field><field><id>METRICS_DATE</id><enabled>Y</enabled><name>METRICS_DATE</name></field><field><id>METRICS_CODE</id><enabled>Y</enabled><name>METRICS_CODE</name></field><field><id>METRICS_DESCRIPTION</id><enabled>Y</enabled><name>METRICS_DESCRIPTION</name></field><field><id>METRICS_SUBJECT</id><enabled>Y</enabled><name>METRICS_SUBJECT</name></field><field><id>METRICS_TYPE</id><enabled>Y</enabled><name>METRICS_TYPE</name></field><field><id>METRICS_VALUE</id><enabled>Y</enabled><name>METRICS_VALUE</name></field></metrics-log-table>
    </log>
    <maxdate>
      <connection/>
      <table/>
      <field/>
      <offset>0.0</offset>
      <maxdiff>0.0</maxdiff>
    </maxdate>
    <size_rowset>10000</size_rowset>
    <sleep_time_empty>50</sleep_time_empty>
    <sleep_time_full>50</sleep_time_full>
    <unique_connections>N</unique_connections>
    <feedback_shown>Y</feedback_shown>
    <feedback_size>50000</feedback_size>
    <using_thread_priorities>Y</using_thread_priorities>
    <shared_objects_file/>
    <capture_step_performance>N</capture_step_performance>
    <step_performance_capturing_delay>1000</step_performance_capturing_delay>
    <step_performance_capturing_size_limit>100</step_performance_capturing_size_limit>
    <dependencies>
    </dependencies>
    <partitionschemas>
    </partitionschemas>
    <slaveservers>
    </slaveservers>
    <clusterschemas>
    </clusterschemas>
  <created_user>-</created_user>
  <created_date>2014&#x2f;04&#x2f;22 19&#x3a;13&#x3a;27.524</created_date>
  <modified_user>-</modified_user>
  <modified_date>2014&#x2f;04&#x2f;22 19&#x3a;13&#x3a;27.524</modified_date>
  </info>
  <notepads>
  </notepads>
  <connection>
    <name>PreferenceDB</name>
    <server>localhost</server>
    <type>POSTGRESQL</type>
    <access>Native</access>
    <database>animedb</database>
    <port>5432</port>
    <username>postgres</username>
    <password>Encrypted 2be98afc86aa7f2e4a31dfd3ddd93e28c</password>
    <servername/>
    <data_tablespace/>
    <index_tablespace/>
    <attributes>
      <attribute><code>FORCE_IDENTIFIERS_TO_LOWERCASE</code><attribute>N</attribute></attribute>
      <attribute><code>FORCE_IDENTIFIERS_TO_UPPERCASE</code><attribute>N</attribute></attribute>
      <attribute><code>IS_CLUSTERED</code><attribute>N</attribute></attribute>
      <attribute><code>PORT_NUMBER</code><attribute>5432</attribute></attribute>
      <attribute><code>PRESERVE_RESERVED_WORD_CASE</code><attribute>N</attribute></attribute>
      <attribute><code>QUOTE_ALL_FIELDS</code><attribute>N</attribute></attribute>
      <attribute><code>SUPPORTS_BOOLEAN_DATA_TYPE</code><attribute>N</attribute></attribute>
      <attribute><code>SUPPORTS_TIMESTAMP_DATA_TYPE</code><attribute>N</attribute></attribute>
      <attribute><code>USE_POOLING</code><attribute>N</attribute></attribute>
    </attributes>
  </connection>
  <order>
  <hop> <from>Text file input</from><to>Modified Java Script Value</to><enabled>Y</enabled> </hop>
  <hop> <from>Modified Java Script Value</from><to>Filter rows</to><enabled>Y</enabled> </hop>
  <hop> <from>Filter rows</from><to>PostgreSQL Bulk Loader</to><enabled>Y</enabled> </hop>
  </order>
  <step>
    <name>Filter rows</name>
    <type>FilterRows</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
<send_true_to/>
<send_false_to>PostgreSQL Bulk Loader</send_false_to>
    <compare>
<condition>
 <negated>N</negated>
 <leftvalue>id</leftvalue>
 <function>STARTS WITH</function>
 <rightvalue/>
 <value><name>constant</name><type>String</type><text>-</text><length>-1</length><precision>-1</precision><isnull>N</isnull><mask>&#x23;</mask></value> </condition>
    </compare>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>494</xloc>
      <yloc>325</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Modified Java Script Value</name>
    <type>ScriptValueMod</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <compatible>Y</compatible>
    <optimizationLevel>9</optimizationLevel>
    <jsScripts>      <jsScript>        <jsScript_type>0</jsScript_type>
        <jsScript_name>Script 1</jsScript_name>
        <jsScript_script>&#xd;&#xa;&#xd;&#xa;var id &#x3d; getFromMap&#x28;&#x27;_id&#x27;, line&#x29;&#x3b;&#xd;&#xa;var status &#x3d; getFromMap&#x28;&#x27;status&#x27;, line&#x29;&#x3b;&#xd;&#xa;var genres &#x3d; getFromMap&#x28;&#x27;genres&#x27;, line&#x29;&#x3b;&#xd;&#xa;var title &#x3d; getFromMap&#x28;&#x27;title&#x27;, line&#x29;&#x3b;&#xd;&#xa;var classification &#x3d; getFromMap&#x28;&#x27;classification&#x27;, line&#x29;&#x3b;&#xd;&#xa;var episodes &#x3d; getFromMap&#x28;&#x27;episodes&#x27;, line&#x29;&#x3b;&#xd;&#xa;var members_score &#x3d; getFromMap&#x28;&#x27;members_score&#x27;, line&#x29;&#x3b;&#xd;&#xa;var type &#x3d; getFromMap&#x28;&#x27;type&#x27;, line&#x29;&#x3b;&#xd;&#xa;var start_date &#x3d; getFromMap&#x28;&#x27;start_date&#x27;, line&#x29;&#x3b;&#xd;&#xa;var end_date &#x3d; getFromMap&#x28;&#x27;end_date&#x27;, line&#x29;&#x3b;</jsScript_script>
      </jsScript>      <jsScript>        <jsScript_type>1</jsScript_type>
        <jsScript_name>JSONParser</jsScript_name>
        <jsScript_script>&#x2f;&#x2f;Script here&#xd;&#xa;&#xd;&#xa;&#x2f;&#x2a;&#xd;&#xa;    json2.js&#xd;&#xa;    2014-02-04&#xd;&#xa;&#xd;&#xa;    Public Domain.&#xd;&#xa;&#xd;&#xa;    NO WARRANTY EXPRESSED OR IMPLIED. USE AT YOUR OWN RISK.&#xd;&#xa;&#xd;&#xa;    See http&#x3a;&#x2f;&#x2f;www.JSON.org&#x2f;js.html&#xd;&#xa;&#xd;&#xa;&#xd;&#xa;    This code should be minified before deployment.&#xd;&#xa;    See http&#x3a;&#x2f;&#x2f;javascript.crockford.com&#x2f;jsmin.html&#xd;&#xa;&#xd;&#xa;    USE YOUR OWN COPY. IT IS EXTREMELY UNWISE TO LOAD CODE FROM SERVERS YOU DO&#xd;&#xa;    NOT CONTROL.&#xd;&#xa;&#xd;&#xa;&#xd;&#xa;    This file creates a global JSON object containing two methods&#x3a; stringify&#xd;&#xa;    and parse.&#xd;&#xa;&#xd;&#xa;        JSON.stringify&#x28;value, replacer, space&#x29;&#xd;&#xa;            value       any JavaScript value, usually an object or array.&#xd;&#xa;&#xd;&#xa;            replacer    an optional parameter that determines how object&#xd;&#xa;                        values are stringified for objects. It can be a&#xd;&#xa;                        function or an array of strings.&#xd;&#xa;&#xd;&#xa;            space       an optional parameter that specifies the indentation&#xd;&#xa;                        of nested structures. If it is omitted, the text will&#xd;&#xa;                        be packed without extra whitespace. If it is a number,&#xd;&#xa;                        it will specify the number of spaces to indent at each&#xd;&#xa;                        level. If it is a string &#x28;such as &#x27;&#x5c;t&#x27; or &#x27;&#x26;nbsp&#x3b;&#x27;&#x29;,&#xd;&#xa;                        it contains the characters used to indent at each level.&#xd;&#xa;&#xd;&#xa;            This method produces a JSON text from a JavaScript value.&#xd;&#xa;&#xd;&#xa;            When an object value is found, if the object contains a toJSON&#xd;&#xa;            method, its toJSON method will be called and the result will be&#xd;&#xa;            stringified. A toJSON method does not serialize&#x3a; it returns the&#xd;&#xa;            value represented by the name&#x2f;value pair that should be serialized,&#xd;&#xa;            or undefined if nothing should be serialized. The toJSON method&#xd;&#xa;            will be passed the key associated with the value, and this will be&#xd;&#xa;            bound to the value&#xd;&#xa;&#xd;&#xa;            For example, this would serialize Dates as ISO strings.&#xd;&#xa;&#xd;&#xa;                Date.prototype.toJSON &#x3d; function &#x28;key&#x29; &#x7b;&#xd;&#xa;                    function f&#x28;n&#x29; &#x7b;&#xd;&#xa;                        &#x2f;&#x2f; Format integers to have at least two digits.&#xd;&#xa;                        return n &#x3c; 10 &#x3f; &#x27;0&#x27; &#x2b; n &#x3a; n&#x3b;&#xd;&#xa;                    &#x7d;&#xd;&#xa;&#xd;&#xa;                    return this.getUTCFullYear&#x28;&#x29;   &#x2b; &#x27;-&#x27; &#x2b;&#xd;&#xa;                         f&#x28;this.getUTCMonth&#x28;&#x29; &#x2b; 1&#x29; &#x2b; &#x27;-&#x27; &#x2b;&#xd;&#xa;                         f&#x28;this.getUTCDate&#x28;&#x29;&#x29;      &#x2b; &#x27;T&#x27; &#x2b;&#xd;&#xa;                         f&#x28;this.getUTCHours&#x28;&#x29;&#x29;     &#x2b; &#x27;&#x3a;&#x27; &#x2b;&#xd;&#xa;                         f&#x28;this.getUTCMinutes&#x28;&#x29;&#x29;   &#x2b; &#x27;&#x3a;&#x27; &#x2b;&#xd;&#xa;                         f&#x28;this.getUTCSeconds&#x28;&#x29;&#x29;   &#x2b; &#x27;Z&#x27;&#x3b;&#xd;&#xa;                &#x7d;&#x3b;&#xd;&#xa;&#xd;&#xa;            You can provide an optional replacer method. It will be passed the&#xd;&#xa;            key and value of each member, with this bound to the containing&#xd;&#xa;            object. The value that is returned from your method will be&#xd;&#xa;            serialized. If your method returns undefined, then the member will&#xd;&#xa;            be excluded from the serialization.&#xd;&#xa;&#xd;&#xa;            If the replacer parameter is an array of strings, then it will be&#xd;&#xa;            used to select the members to be serialized. It filters the results&#xd;&#xa;            such that only members with keys listed in the replacer array are&#xd;&#xa;            stringified.&#xd;&#xa;&#xd;&#xa;            Values that do not have JSON representations, such as undefined or&#xd;&#xa;            functions, will not be serialized. Such values in objects will be&#xd;&#xa;            dropped&#x3b; in arrays they will be replaced with null. You can use&#xd;&#xa;            a replacer function to replace those with JSON values.&#xd;&#xa;            JSON.stringify&#x28;undefined&#x29; returns undefined.&#xd;&#xa;&#xd;&#xa;            The optional space parameter produces a stringification of the&#xd;&#xa;            value that is filled with line breaks and indentation to make it&#xd;&#xa;            easier to read.&#xd;&#xa;&#xd;&#xa;            If the space parameter is a non-empty string, then that string will&#xd;&#xa;            be used for indentation. If the space parameter is a number, then&#xd;&#xa;            the indentation will be that many spaces.&#xd;&#xa;&#xd;&#xa;            Example&#x3a;&#xd;&#xa;&#xd;&#xa;            text &#x3d; JSON.stringify&#x28;&#x5b;&#x27;e&#x27;, &#x7b;pluribus&#x3a; &#x27;unum&#x27;&#x7d;&#x5d;&#x29;&#x3b;&#xd;&#xa;            &#x2f;&#x2f; text is &#x27;&#x5b;&#x22;e&#x22;,&#x7b;&#x22;pluribus&#x22;&#x3a;&#x22;unum&#x22;&#x7d;&#x5d;&#x27;&#xd;&#xa;&#xd;&#xa;&#xd;&#xa;            text &#x3d; JSON.stringify&#x28;&#x5b;&#x27;e&#x27;, &#x7b;pluribus&#x3a; &#x27;unum&#x27;&#x7d;&#x5d;, null, &#x27;&#x5c;t&#x27;&#x29;&#x3b;&#xd;&#xa;            &#x2f;&#x2f; text is &#x27;&#x5b;&#x5c;n&#x5c;t&#x22;e&#x22;,&#x5c;n&#x5c;t&#x7b;&#x5c;n&#x5c;t&#x5c;t&#x22;pluribus&#x22;&#x3a; &#x22;unum&#x22;&#x5c;n&#x5c;t&#x7d;&#x5c;n&#x5d;&#x27;&#xd;&#xa;&#xd;&#xa;            text &#x3d; JSON.stringify&#x28;&#x5b;new Date&#x28;&#x29;&#x5d;, function &#x28;key, value&#x29; &#x7b;&#xd;&#xa;                return this&#x5b;key&#x5d; instanceof Date &#x3f;&#xd;&#xa;                    &#x27;Date&#x28;&#x27; &#x2b; this&#x5b;key&#x5d; &#x2b; &#x27;&#x29;&#x27; &#x3a; value&#x3b;&#xd;&#xa;            &#x7d;&#x29;&#x3b;&#xd;&#xa;            &#x2f;&#x2f; text is &#x27;&#x5b;&#x22;Date&#x28;---current time---&#x29;&#x22;&#x5d;&#x27;&#xd;&#xa;&#xd;&#xa;&#xd;&#xa;        JSON.parse&#x28;text, reviver&#x29;&#xd;&#xa;            This method parses a JSON text to produce an object or array.&#xd;&#xa;            It can throw a SyntaxError exception.&#xd;&#xa;&#xd;&#xa;            The optional reviver parameter is a function that can filter and&#xd;&#xa;            transform the results. It receives each of the keys and values,&#xd;&#xa;            and its return value is used instead of the original value.&#xd;&#xa;            If it returns what it received, then the structure is not modified.&#xd;&#xa;            If it returns undefined then the member is deleted.&#xd;&#xa;&#xd;&#xa;            Example&#x3a;&#xd;&#xa;&#xd;&#xa;            &#x2f;&#x2f; Parse the text. Values that look like ISO date strings will&#xd;&#xa;            &#x2f;&#x2f; be converted to Date objects.&#xd;&#xa;&#xd;&#xa;            myData &#x3d; JSON.parse&#x28;text, function &#x28;key, value&#x29; &#x7b;&#xd;&#xa;                var a&#x3b;&#xd;&#xa;                if &#x28;typeof value &#x3d;&#x3d;&#x3d; &#x27;string&#x27;&#x29; &#x7b;&#xd;&#xa;                    a &#x3d;&#xd;&#xa;&#x2f;&#x5e;&#x28;&#x5c;d&#x7b;4&#x7d;&#x29;-&#x28;&#x5c;d&#x7b;2&#x7d;&#x29;-&#x28;&#x5c;d&#x7b;2&#x7d;&#x29;T&#x28;&#x5c;d&#x7b;2&#x7d;&#x29;&#x3a;&#x28;&#x5c;d&#x7b;2&#x7d;&#x29;&#x3a;&#x28;&#x5c;d&#x7b;2&#x7d;&#x28;&#x3f;&#x3a;&#x5c;.&#x5c;d&#x2a;&#x29;&#x3f;&#x29;Z&#x24;&#x2f;.exec&#x28;value&#x29;&#x3b;&#xd;&#xa;                    if &#x28;a&#x29; &#x7b;&#xd;&#xa;                        return new Date&#x28;Date.UTC&#x28;&#x2b;a&#x5b;1&#x5d;, &#x2b;a&#x5b;2&#x5d; - 1, &#x2b;a&#x5b;3&#x5d;, &#x2b;a&#x5b;4&#x5d;,&#xd;&#xa;                            &#x2b;a&#x5b;5&#x5d;, &#x2b;a&#x5b;6&#x5d;&#x29;&#x29;&#x3b;&#xd;&#xa;                    &#x7d;&#xd;&#xa;                &#x7d;&#xd;&#xa;                return value&#x3b;&#xd;&#xa;            &#x7d;&#x29;&#x3b;&#xd;&#xa;&#xd;&#xa;            myData &#x3d; JSON.parse&#x28;&#x27;&#x5b;&#x22;Date&#x28;09&#x2f;09&#x2f;2001&#x29;&#x22;&#x5d;&#x27;, function &#x28;key, value&#x29; &#x7b;&#xd;&#xa;                var d&#x3b;&#xd;&#xa;                if &#x28;typeof value &#x3d;&#x3d;&#x3d; &#x27;string&#x27; &#x26;&#x26;&#xd;&#xa;                        value.slice&#x28;0, 5&#x29; &#x3d;&#x3d;&#x3d; &#x27;Date&#x28;&#x27; &#x26;&#x26;&#xd;&#xa;                        value.slice&#x28;-1&#x29; &#x3d;&#x3d;&#x3d; &#x27;&#x29;&#x27;&#x29; &#x7b;&#xd;&#xa;                    d &#x3d; new Date&#x28;value.slice&#x28;5, -1&#x29;&#x29;&#x3b;&#xd;&#xa;                    if &#x28;d&#x29; &#x7b;&#xd;&#xa;                        return d&#x3b;&#xd;&#xa;                    &#x7d;&#xd;&#xa;                &#x7d;&#xd;&#xa;                return value&#x3b;&#xd;&#xa;            &#x7d;&#x29;&#x3b;&#xd;&#xa;&#xd;&#xa;&#xd;&#xa;    This is a reference implementation. You are free to copy, modify, or&#xd;&#xa;    redistribute.&#xd;&#xa;&#x2a;&#x2f;&#xd;&#xa;&#xd;&#xa;&#x2f;&#x2a;jslint evil&#x3a; true, regexp&#x3a; true &#x2a;&#x2f;&#xd;&#xa;&#xd;&#xa;&#x2f;&#x2a;members &#x22;&#x22;, &#x22;&#x5c;b&#x22;, &#x22;&#x5c;t&#x22;, &#x22;&#x5c;n&#x22;, &#x22;&#x5c;f&#x22;, &#x22;&#x5c;r&#x22;, &#x22;&#x5c;&#x22;&#x22;, JSON, &#x22;&#x5c;&#x5c;&#x22;, apply,&#xd;&#xa;    call, charCodeAt, getUTCDate, getUTCFullYear, getUTCHours,&#xd;&#xa;    getUTCMinutes, getUTCMonth, getUTCSeconds, hasOwnProperty, join,&#xd;&#xa;    lastIndex, length, parse, prototype, push, replace, slice, stringify,&#xd;&#xa;    test, toJSON, toString, valueOf&#xd;&#xa;&#x2a;&#x2f;&#xd;&#xa;&#xd;&#xa;&#xd;&#xa;&#x2f;&#x2f; Create a JSON object only if one does not already exist. We create the&#xd;&#xa;&#x2f;&#x2f; methods in a closure to avoid creating global variables.&#xd;&#xa;&#xd;&#xa;if &#x28;typeof JSON &#x21;&#x3d;&#x3d; &#x27;object&#x27;&#x29; &#x7b;&#xd;&#xa;    JSON &#x3d; &#x7b;&#x7d;&#x3b;&#xd;&#xa;&#x7d;&#xd;&#xa;&#xd;&#xa;&#x28;function &#x28;&#x29; &#x7b;&#xd;&#xa;    &#x27;use strict&#x27;&#x3b;&#xd;&#xa;&#xd;&#xa;    function f&#x28;n&#x29; &#x7b;&#xd;&#xa;        &#x2f;&#x2f; Format integers to have at least two digits.&#xd;&#xa;        return n &#x3c; 10 &#x3f; &#x27;0&#x27; &#x2b; n &#x3a; n&#x3b;&#xd;&#xa;    &#x7d;&#xd;&#xa;&#xd;&#xa;    if &#x28;typeof Date.prototype.toJSON &#x21;&#x3d;&#x3d; &#x27;function&#x27;&#x29; &#x7b;&#xd;&#xa;&#xd;&#xa;        Date.prototype.toJSON &#x3d; function &#x28;&#x29; &#x7b;&#xd;&#xa;&#xd;&#xa;            return isFinite&#x28;this.valueOf&#x28;&#x29;&#x29;&#xd;&#xa;                &#x3f; this.getUTCFullYear&#x28;&#x29;     &#x2b; &#x27;-&#x27; &#x2b;&#xd;&#xa;                    f&#x28;this.getUTCMonth&#x28;&#x29; &#x2b; 1&#x29; &#x2b; &#x27;-&#x27; &#x2b;&#xd;&#xa;                    f&#x28;this.getUTCDate&#x28;&#x29;&#x29;      &#x2b; &#x27;T&#x27; &#x2b;&#xd;&#xa;                    f&#x28;this.getUTCHours&#x28;&#x29;&#x29;     &#x2b; &#x27;&#x3a;&#x27; &#x2b;&#xd;&#xa;                    f&#x28;this.getUTCMinutes&#x28;&#x29;&#x29;   &#x2b; &#x27;&#x3a;&#x27; &#x2b;&#xd;&#xa;                    f&#x28;this.getUTCSeconds&#x28;&#x29;&#x29;   &#x2b; &#x27;Z&#x27;&#xd;&#xa;                &#x3a; null&#x3b;&#xd;&#xa;        &#x7d;&#x3b;&#xd;&#xa;&#xd;&#xa;        String.prototype.toJSON      &#x3d;&#xd;&#xa;            Number.prototype.toJSON  &#x3d;&#xd;&#xa;            Boolean.prototype.toJSON &#x3d; function &#x28;&#x29; &#x7b;&#xd;&#xa;                return this.valueOf&#x28;&#x29;&#x3b;&#xd;&#xa;            &#x7d;&#x3b;&#xd;&#xa;    &#x7d;&#xd;&#xa;&#xd;&#xa;	function getFromMap&#x28;key,jsonRow&#x29;&#x7b;&#xd;&#xa;  try&#x7b;&#xd;&#xa;   var map &#x3d; JSON.parse&#x28;jsonRow&#x29;&#x3b;&#xd;&#xa;  &#x7d;&#xd;&#xa;  catch&#x28;e&#x29;&#x7b;&#xd;&#xa;   var message &#x3d; &#x22;Unparsable JSON&#x3a; &#x22;&#x2b;jsonRow&#x2b;&#x22; Desc&#x3a; &#x22;&#x2b;e.message&#x3b;&#xd;&#xa;   var nr_errors &#x3d; 1&#x3b;&#xd;&#xa;   var field &#x3d; &#x22;jsonRow&#x22;&#x3b;&#xd;&#xa;   var errcode &#x3d; &#x22;JSON_PARSE&#x22;&#x3b;&#xd;&#xa;   &#x2f;&#x2f;_step_.putError&#x28;getInputRowMeta&#x28;&#x29;, row, nr_errors, message, field, errcode&#x29;&#x3b;&#xd;&#xa;   trans_Status &#x3d; SKIP_TRANSFORMATION&#x3b;&#xd;&#xa;   return null&#x3b;&#xd;&#xa;  &#x7d;&#xd;&#xa;&#xd;&#xa;  if&#x28;map&#x5b;key&#x5d; &#x3d;&#x3d; undefined&#x29;&#x7b;&#xd;&#xa;   return null&#x3b;&#xd;&#xa;  &#x7d;&#xd;&#xa;  trans_Status &#x3d; CONTINUE_TRANSFORMATION&#x3b;&#xd;&#xa;  return map&#x5b;key&#x5d;&#xd;&#xa;&#x7d;&#xd;&#xa;&#xd;&#xa;    var cx,&#xd;&#xa;        escapable,&#xd;&#xa;        gap,&#xd;&#xa;        indent,&#xd;&#xa;        meta,&#xd;&#xa;        rep&#x3b;&#xd;&#xa;&#xd;&#xa;&#xd;&#xa;    function quote&#x28;string&#x29; &#x7b;&#xd;&#xa;&#xd;&#xa;&#x2f;&#x2f; If the string contains no control characters, no quote characters, and no&#xd;&#xa;&#x2f;&#x2f; backslash characters, then we can safely slap some quotes around it.&#xd;&#xa;&#x2f;&#x2f; Otherwise we must also replace the offending characters with safe escape&#xd;&#xa;&#x2f;&#x2f; sequences.&#xd;&#xa;&#xd;&#xa;        escapable.lastIndex &#x3d; 0&#x3b;&#xd;&#xa;        return escapable.test&#x28;string&#x29; &#x3f; &#x27;&#x22;&#x27; &#x2b; string.replace&#x28;escapable, function &#x28;a&#x29; &#x7b;&#xd;&#xa;            var c &#x3d; meta&#x5b;a&#x5d;&#x3b;&#xd;&#xa;            return typeof c &#x3d;&#x3d;&#x3d; &#x27;string&#x27;&#xd;&#xa;                &#x3f; c&#xd;&#xa;                &#x3a; &#x27;&#x5c;&#x5c;u&#x27; &#x2b; &#x28;&#x27;0000&#x27; &#x2b; a.charCodeAt&#x28;0&#x29;.toString&#x28;16&#x29;&#x29;.slice&#x28;-4&#x29;&#x3b;&#xd;&#xa;        &#x7d;&#x29; &#x2b; &#x27;&#x22;&#x27; &#x3a; &#x27;&#x22;&#x27; &#x2b; string &#x2b; &#x27;&#x22;&#x27;&#x3b;&#xd;&#xa;    &#x7d;&#xd;&#xa;&#xd;&#xa;&#xd;&#xa;    function str&#x28;key, holder&#x29; &#x7b;&#xd;&#xa;&#xd;&#xa;&#x2f;&#x2f; Produce a string from holder&#x5b;key&#x5d;.&#xd;&#xa;&#xd;&#xa;        var i,          &#x2f;&#x2f; The loop counter.&#xd;&#xa;            k,          &#x2f;&#x2f; The member key.&#xd;&#xa;            v,          &#x2f;&#x2f; The member value.&#xd;&#xa;            length,&#xd;&#xa;            mind &#x3d; gap,&#xd;&#xa;            partial,&#xd;&#xa;            value &#x3d; holder&#x5b;key&#x5d;&#x3b;&#xd;&#xa;&#xd;&#xa;&#x2f;&#x2f; If the value has a toJSON method, call it to obtain a replacement value.&#xd;&#xa;&#xd;&#xa;        if &#x28;value &#x26;&#x26; typeof value &#x3d;&#x3d;&#x3d; &#x27;object&#x27; &#x26;&#x26;&#xd;&#xa;                typeof value.toJSON &#x3d;&#x3d;&#x3d; &#x27;function&#x27;&#x29; &#x7b;&#xd;&#xa;            value &#x3d; value.toJSON&#x28;key&#x29;&#x3b;&#xd;&#xa;        &#x7d;&#xd;&#xa;&#xd;&#xa;&#x2f;&#x2f; If we were called with a replacer function, then call the replacer to&#xd;&#xa;&#x2f;&#x2f; obtain a replacement value.&#xd;&#xa;&#xd;&#xa;        if &#x28;typeof rep &#x3d;&#x3d;&#x3d; &#x27;function&#x27;&#x29; &#x7b;&#xd;&#xa;            value &#x3d; rep.call&#x28;holder, key, value&#x29;&#x3b;&#xd;&#xa;        &#x7d;&#xd;&#xa;&#xd;&#xa;&#x2f;&#x2f; What happens next depends on the value&#x27;s type.&#xd;&#xa;&#xd;&#xa;        switch &#x28;typeof value&#x29; &#x7b;&#xd;&#xa;        case &#x27;string&#x27;&#x3a;&#xd;&#xa;            return quote&#x28;value&#x29;&#x3b;&#xd;&#xa;&#xd;&#xa;        case &#x27;number&#x27;&#x3a;&#xd;&#xa;&#xd;&#xa;&#x2f;&#x2f; JSON numbers must be finite. Encode non-finite numbers as null.&#xd;&#xa;&#xd;&#xa;            return isFinite&#x28;value&#x29; &#x3f; String&#x28;value&#x29; &#x3a; &#x27;null&#x27;&#x3b;&#xd;&#xa;&#xd;&#xa;        case &#x27;boolean&#x27;&#x3a;&#xd;&#xa;        case &#x27;null&#x27;&#x3a;&#xd;&#xa;&#xd;&#xa;&#x2f;&#x2f; If the value is a boolean or null, convert it to a string. Note&#x3a;&#xd;&#xa;&#x2f;&#x2f; typeof null does not produce &#x27;null&#x27;. The case is included here in&#xd;&#xa;&#x2f;&#x2f; the remote chance that this gets fixed someday.&#xd;&#xa;&#xd;&#xa;            return String&#x28;value&#x29;&#x3b;&#xd;&#xa;&#xd;&#xa;&#x2f;&#x2f; If the type is &#x27;object&#x27;, we might be dealing with an object or an array or&#xd;&#xa;&#x2f;&#x2f; null.&#xd;&#xa;&#xd;&#xa;        case &#x27;object&#x27;&#x3a;&#xd;&#xa;&#xd;&#xa;&#x2f;&#x2f; Due to a specification blunder in ECMAScript, typeof null is &#x27;object&#x27;,&#xd;&#xa;&#x2f;&#x2f; so watch out for that case.&#xd;&#xa;&#xd;&#xa;            if &#x28;&#x21;value&#x29; &#x7b;&#xd;&#xa;                return &#x27;null&#x27;&#x3b;&#xd;&#xa;            &#x7d;&#xd;&#xa;&#xd;&#xa;&#x2f;&#x2f; Make an array to hold the partial results of stringifying this object value.&#xd;&#xa;&#xd;&#xa;            gap &#x2b;&#x3d; indent&#x3b;&#xd;&#xa;            partial &#x3d; &#x5b;&#x5d;&#x3b;&#xd;&#xa;&#xd;&#xa;&#x2f;&#x2f; Is the value an array&#x3f;&#xd;&#xa;&#xd;&#xa;            if &#x28;Object.prototype.toString.apply&#x28;value&#x29; &#x3d;&#x3d;&#x3d; &#x27;&#x5b;object Array&#x5d;&#x27;&#x29; &#x7b;&#xd;&#xa;&#xd;&#xa;&#x2f;&#x2f; The value is an array. Stringify every element. Use null as a placeholder&#xd;&#xa;&#x2f;&#x2f; for non-JSON values.&#xd;&#xa;&#xd;&#xa;                length &#x3d; value.length&#x3b;&#xd;&#xa;                for &#x28;i &#x3d; 0&#x3b; i &#x3c; length&#x3b; i &#x2b;&#x3d; 1&#x29; &#x7b;&#xd;&#xa;                    partial&#x5b;i&#x5d; &#x3d; str&#x28;i, value&#x29; &#x7c;&#x7c; &#x27;null&#x27;&#x3b;&#xd;&#xa;                &#x7d;&#xd;&#xa;&#xd;&#xa;&#x2f;&#x2f; Join all of the elements together, separated with commas, and wrap them in&#xd;&#xa;&#x2f;&#x2f; brackets.&#xd;&#xa;&#xd;&#xa;                v &#x3d; partial.length &#x3d;&#x3d;&#x3d; 0&#xd;&#xa;                    &#x3f; &#x27;&#x5b;&#x5d;&#x27;&#xd;&#xa;                    &#x3a; gap&#xd;&#xa;                    &#x3f; &#x27;&#x5b;&#x5c;n&#x27; &#x2b; gap &#x2b; partial.join&#x28;&#x27;,&#x5c;n&#x27; &#x2b; gap&#x29; &#x2b; &#x27;&#x5c;n&#x27; &#x2b; mind &#x2b; &#x27;&#x5d;&#x27;&#xd;&#xa;                    &#x3a; &#x27;&#x5b;&#x27; &#x2b; partial.join&#x28;&#x27;,&#x27;&#x29; &#x2b; &#x27;&#x5d;&#x27;&#x3b;&#xd;&#xa;                gap &#x3d; mind&#x3b;&#xd;&#xa;                return v&#x3b;&#xd;&#xa;            &#x7d;&#xd;&#xa;&#xd;&#xa;&#x2f;&#x2f; If the replacer is an array, use it to select the members to be stringified.&#xd;&#xa;&#xd;&#xa;            if &#x28;rep &#x26;&#x26; typeof rep &#x3d;&#x3d;&#x3d; &#x27;object&#x27;&#x29; &#x7b;&#xd;&#xa;                length &#x3d; rep.length&#x3b;&#xd;&#xa;                for &#x28;i &#x3d; 0&#x3b; i &#x3c; length&#x3b; i &#x2b;&#x3d; 1&#x29; &#x7b;&#xd;&#xa;                    if &#x28;typeof rep&#x5b;i&#x5d; &#x3d;&#x3d;&#x3d; &#x27;string&#x27;&#x29; &#x7b;&#xd;&#xa;                        k &#x3d; rep&#x5b;i&#x5d;&#x3b;&#xd;&#xa;                        v &#x3d; str&#x28;k, value&#x29;&#x3b;&#xd;&#xa;                        if &#x28;v&#x29; &#x7b;&#xd;&#xa;                            partial.push&#x28;quote&#x28;k&#x29; &#x2b; &#x28;gap &#x3f; &#x27;&#x3a; &#x27; &#x3a; &#x27;&#x3a;&#x27;&#x29; &#x2b; v&#x29;&#x3b;&#xd;&#xa;                        &#x7d;&#xd;&#xa;                    &#x7d;&#xd;&#xa;                &#x7d;&#xd;&#xa;            &#x7d; else &#x7b;&#xd;&#xa;&#xd;&#xa;&#x2f;&#x2f; Otherwise, iterate through all of the keys in the object.&#xd;&#xa;&#xd;&#xa;                for &#x28;k in value&#x29; &#x7b;&#xd;&#xa;                    if &#x28;Object.prototype.hasOwnProperty.call&#x28;value, k&#x29;&#x29; &#x7b;&#xd;&#xa;                        v &#x3d; str&#x28;k, value&#x29;&#x3b;&#xd;&#xa;                        if &#x28;v&#x29; &#x7b;&#xd;&#xa;                            partial.push&#x28;quote&#x28;k&#x29; &#x2b; &#x28;gap &#x3f; &#x27;&#x3a; &#x27; &#x3a; &#x27;&#x3a;&#x27;&#x29; &#x2b; v&#x29;&#x3b;&#xd;&#xa;                        &#x7d;&#xd;&#xa;                    &#x7d;&#xd;&#xa;                &#x7d;&#xd;&#xa;            &#x7d;&#xd;&#xa;&#xd;&#xa;&#x2f;&#x2f; Join all of the member texts together, separated with commas,&#xd;&#xa;&#x2f;&#x2f; and wrap them in braces.&#xd;&#xa;&#xd;&#xa;            v &#x3d; partial.length &#x3d;&#x3d;&#x3d; 0&#xd;&#xa;                &#x3f; &#x27;&#x7b;&#x7d;&#x27;&#xd;&#xa;                &#x3a; gap&#xd;&#xa;                &#x3f; &#x27;&#x7b;&#x5c;n&#x27; &#x2b; gap &#x2b; partial.join&#x28;&#x27;,&#x5c;n&#x27; &#x2b; gap&#x29; &#x2b; &#x27;&#x5c;n&#x27; &#x2b; mind &#x2b; &#x27;&#x7d;&#x27;&#xd;&#xa;                &#x3a; &#x27;&#x7b;&#x27; &#x2b; partial.join&#x28;&#x27;,&#x27;&#x29; &#x2b; &#x27;&#x7d;&#x27;&#x3b;&#xd;&#xa;            gap &#x3d; mind&#x3b;&#xd;&#xa;            return v&#x3b;&#xd;&#xa;        &#x7d;&#xd;&#xa;    &#x7d;&#xd;&#xa;&#xd;&#xa;&#x2f;&#x2f; If the JSON object does not yet have a stringify method, give it one.&#xd;&#xa;&#xd;&#xa;    if &#x28;typeof JSON.stringify &#x21;&#x3d;&#x3d; &#x27;function&#x27;&#x29; &#x7b;&#xd;&#xa;        escapable &#x3d; &#x2f;&#x5b;&#x5c;&#x5c;&#x5c;&#x22;&#x5c;x00-&#x5c;x1f&#x5c;x7f-&#x5c;x9f&#x5c;u00ad&#x5c;u0600-&#x5c;u0604&#x5c;u070f&#x5c;u17b4&#x5c;u17b5&#x5c;u200c-&#x5c;u200f&#x5c;u2028-&#x5c;u202f&#x5c;u2060-&#x5c;u206f&#x5c;ufeff&#x5c;ufff0-&#x5c;uffff&#x5d;&#x2f;g&#x3b;&#xd;&#xa;        meta &#x3d; &#x7b;    &#x2f;&#x2f; table of character substitutions&#xd;&#xa;            &#x27;&#x5c;b&#x27;&#x3a; &#x27;&#x5c;&#x5c;b&#x27;,&#xd;&#xa;            &#x27;&#x5c;t&#x27;&#x3a; &#x27;&#x5c;&#x5c;t&#x27;,&#xd;&#xa;            &#x27;&#x5c;n&#x27;&#x3a; &#x27;&#x5c;&#x5c;n&#x27;,&#xd;&#xa;            &#x27;&#x5c;f&#x27;&#x3a; &#x27;&#x5c;&#x5c;f&#x27;,&#xd;&#xa;            &#x27;&#x5c;r&#x27;&#x3a; &#x27;&#x5c;&#x5c;r&#x27;,&#xd;&#xa;            &#x27;&#x22;&#x27; &#x3a; &#x27;&#x5c;&#x5c;&#x22;&#x27;,&#xd;&#xa;            &#x27;&#x5c;&#x5c;&#x27;&#x3a; &#x27;&#x5c;&#x5c;&#x5c;&#x5c;&#x27;&#xd;&#xa;        &#x7d;&#x3b;&#xd;&#xa;        JSON.stringify &#x3d; function &#x28;value, replacer, space&#x29; &#x7b;&#xd;&#xa;&#xd;&#xa;&#x2f;&#x2f; The stringify method takes a value and an optional replacer, and an optional&#xd;&#xa;&#x2f;&#x2f; space parameter, and returns a JSON text. The replacer can be a function&#xd;&#xa;&#x2f;&#x2f; that can replace values, or an array of strings that will select the keys.&#xd;&#xa;&#x2f;&#x2f; A default replacer method can be provided. Use of the space parameter can&#xd;&#xa;&#x2f;&#x2f; produce text that is more easily readable.&#xd;&#xa;&#xd;&#xa;            var i&#x3b;&#xd;&#xa;            gap &#x3d; &#x27;&#x27;&#x3b;&#xd;&#xa;            indent &#x3d; &#x27;&#x27;&#x3b;&#xd;&#xa;&#xd;&#xa;&#x2f;&#x2f; If the space parameter is a number, make an indent string containing that&#xd;&#xa;&#x2f;&#x2f; many spaces.&#xd;&#xa;&#xd;&#xa;            if &#x28;typeof space &#x3d;&#x3d;&#x3d; &#x27;number&#x27;&#x29; &#x7b;&#xd;&#xa;                for &#x28;i &#x3d; 0&#x3b; i &#x3c; space&#x3b; i &#x2b;&#x3d; 1&#x29; &#x7b;&#xd;&#xa;                    indent &#x2b;&#x3d; &#x27; &#x27;&#x3b;&#xd;&#xa;                &#x7d;&#xd;&#xa;&#xd;&#xa;&#x2f;&#x2f; If the space parameter is a string, it will be used as the indent string.&#xd;&#xa;&#xd;&#xa;            &#x7d; else if &#x28;typeof space &#x3d;&#x3d;&#x3d; &#x27;string&#x27;&#x29; &#x7b;&#xd;&#xa;                indent &#x3d; space&#x3b;&#xd;&#xa;            &#x7d;&#xd;&#xa;&#xd;&#xa;&#x2f;&#x2f; If there is a replacer, it must be a function or an array.&#xd;&#xa;&#x2f;&#x2f; Otherwise, throw an error.&#xd;&#xa;&#xd;&#xa;            rep &#x3d; replacer&#x3b;&#xd;&#xa;            if &#x28;replacer &#x26;&#x26; typeof replacer &#x21;&#x3d;&#x3d; &#x27;function&#x27; &#x26;&#x26;&#xd;&#xa;                    &#x28;typeof replacer &#x21;&#x3d;&#x3d; &#x27;object&#x27; &#x7c;&#x7c;&#xd;&#xa;                    typeof replacer.length &#x21;&#x3d;&#x3d; &#x27;number&#x27;&#x29;&#x29; &#x7b;&#xd;&#xa;                throw new Error&#x28;&#x27;JSON.stringify&#x27;&#x29;&#x3b;&#xd;&#xa;            &#x7d;&#xd;&#xa;&#xd;&#xa;&#x2f;&#x2f; Make a fake root object containing our value under the key of &#x27;&#x27;.&#xd;&#xa;&#x2f;&#x2f; Return the result of stringifying the value.&#xd;&#xa;&#xd;&#xa;            return str&#x28;&#x27;&#x27;, &#x7b;&#x27;&#x27;&#x3a; value&#x7d;&#x29;&#x3b;&#xd;&#xa;        &#x7d;&#x3b;&#xd;&#xa;    &#x7d;&#xd;&#xa;&#xd;&#xa;&#xd;&#xa;&#x2f;&#x2f; If the JSON object does not yet have a parse method, give it one.&#xd;&#xa;&#xd;&#xa;    if &#x28;typeof JSON.parse &#x21;&#x3d;&#x3d; &#x27;function&#x27;&#x29; &#x7b;&#xd;&#xa;        cx &#x3d; &#x2f;&#x5b;&#x5c;u0000&#x5c;u00ad&#x5c;u0600-&#x5c;u0604&#x5c;u070f&#x5c;u17b4&#x5c;u17b5&#x5c;u200c-&#x5c;u200f&#x5c;u2028-&#x5c;u202f&#x5c;u2060-&#x5c;u206f&#x5c;ufeff&#x5c;ufff0-&#x5c;uffff&#x5d;&#x2f;g&#x3b;&#xd;&#xa;        JSON.parse &#x3d; function &#x28;text, reviver&#x29; &#x7b;&#xd;&#xa;&#xd;&#xa;&#x2f;&#x2f; The parse method takes a text and an optional reviver function, and returns&#xd;&#xa;&#x2f;&#x2f; a JavaScript value if the text is a valid JSON text.&#xd;&#xa;&#xd;&#xa;            var j&#x3b;&#xd;&#xa;&#xd;&#xa;            function walk&#x28;holder, key&#x29; &#x7b;&#xd;&#xa;&#xd;&#xa;&#x2f;&#x2f; The walk method is used to recursively walk the resulting structure so&#xd;&#xa;&#x2f;&#x2f; that modifications can be made.&#xd;&#xa;&#xd;&#xa;                var k, v, value &#x3d; holder&#x5b;key&#x5d;&#x3b;&#xd;&#xa;                if &#x28;value &#x26;&#x26; typeof value &#x3d;&#x3d;&#x3d; &#x27;object&#x27;&#x29; &#x7b;&#xd;&#xa;                    for &#x28;k in value&#x29; &#x7b;&#xd;&#xa;                        if &#x28;Object.prototype.hasOwnProperty.call&#x28;value, k&#x29;&#x29; &#x7b;&#xd;&#xa;                            v &#x3d; walk&#x28;value, k&#x29;&#x3b;&#xd;&#xa;                            if &#x28;v &#x21;&#x3d;&#x3d; undefined&#x29; &#x7b;&#xd;&#xa;                                value&#x5b;k&#x5d; &#x3d; v&#x3b;&#xd;&#xa;                            &#x7d; else &#x7b;&#xd;&#xa;                                delete value&#x5b;k&#x5d;&#x3b;&#xd;&#xa;                            &#x7d;&#xd;&#xa;                        &#x7d;&#xd;&#xa;                    &#x7d;&#xd;&#xa;                &#x7d;&#xd;&#xa;                return reviver.call&#x28;holder, key, value&#x29;&#x3b;&#xd;&#xa;            &#x7d;&#xd;&#xa;&#xd;&#xa;&#xd;&#xa;&#x2f;&#x2f; Parsing happens in four stages. In the first stage, we replace certain&#xd;&#xa;&#x2f;&#x2f; Unicode characters with escape sequences. JavaScript handles many characters&#xd;&#xa;&#x2f;&#x2f; incorrectly, either silently deleting them, or treating them as line endings.&#xd;&#xa;&#xd;&#xa;            text &#x3d; String&#x28;text&#x29;&#x3b;&#xd;&#xa;            cx.lastIndex &#x3d; 0&#x3b;&#xd;&#xa;            if &#x28;cx.test&#x28;text&#x29;&#x29; &#x7b;&#xd;&#xa;                text &#x3d; text.replace&#x28;cx, function &#x28;a&#x29; &#x7b;&#xd;&#xa;                    return &#x27;&#x5c;&#x5c;u&#x27; &#x2b;&#xd;&#xa;                        &#x28;&#x27;0000&#x27; &#x2b; a.charCodeAt&#x28;0&#x29;.toString&#x28;16&#x29;&#x29;.slice&#x28;-4&#x29;&#x3b;&#xd;&#xa;                &#x7d;&#x29;&#x3b;&#xd;&#xa;            &#x7d;&#xd;&#xa;&#xd;&#xa;&#x2f;&#x2f; In the second stage, we run the text against regular expressions that look&#xd;&#xa;&#x2f;&#x2f; for non-JSON patterns. We are especially concerned with &#x27;&#x28;&#x29;&#x27; and &#x27;new&#x27;&#xd;&#xa;&#x2f;&#x2f; because they can cause invocation, and &#x27;&#x3d;&#x27; because it can cause mutation.&#xd;&#xa;&#x2f;&#x2f; But just to be safe, we want to reject all unexpected forms.&#xd;&#xa;&#xd;&#xa;&#x2f;&#x2f; We split the second stage into 4 regexp operations in order to work around&#xd;&#xa;&#x2f;&#x2f; crippling inefficiencies in IE&#x27;s and Safari&#x27;s regexp engines. First we&#xd;&#xa;&#x2f;&#x2f; replace the JSON backslash pairs with &#x27;&#x40;&#x27; &#x28;a non-JSON character&#x29;. Second, we&#xd;&#xa;&#x2f;&#x2f; replace all simple value tokens with &#x27;&#x5d;&#x27; characters. Third, we delete all&#xd;&#xa;&#x2f;&#x2f; open brackets that follow a colon or comma or that begin the text. Finally,&#xd;&#xa;&#x2f;&#x2f; we look to see that the remaining characters are only whitespace or &#x27;&#x5d;&#x27; or&#xd;&#xa;&#x2f;&#x2f; &#x27;,&#x27; or &#x27;&#x3a;&#x27; or &#x27;&#x7b;&#x27; or &#x27;&#x7d;&#x27;. If that is so, then the text is safe for eval.&#xd;&#xa;&#xd;&#xa;            if &#x28;&#x2f;&#x5e;&#x5b;&#x5c;&#x5d;,&#x3a;&#x7b;&#x7d;&#x5c;s&#x5d;&#x2a;&#x24;&#x2f;&#xd;&#xa;                    .test&#x28;text.replace&#x28;&#x2f;&#x5c;&#x5c;&#x28;&#x3f;&#x3a;&#x5b;&#x22;&#x5c;&#x5c;&#x5c;&#x2f;bfnrt&#x5d;&#x7c;u&#x5b;0-9a-fA-F&#x5d;&#x7b;4&#x7d;&#x29;&#x2f;g, &#x27;&#x40;&#x27;&#x29;&#xd;&#xa;                        .replace&#x28;&#x2f;&#x22;&#x5b;&#x5e;&#x22;&#x5c;&#x5c;&#x5c;n&#x5c;r&#x5d;&#x2a;&#x22;&#x7c;true&#x7c;false&#x7c;null&#x7c;-&#x3f;&#x5c;d&#x2b;&#x28;&#x3f;&#x3a;&#x5c;.&#x5c;d&#x2a;&#x29;&#x3f;&#x28;&#x3f;&#x3a;&#x5b;eE&#x5d;&#x5b;&#x2b;&#x5c;-&#x5d;&#x3f;&#x5c;d&#x2b;&#x29;&#x3f;&#x2f;g, &#x27;&#x5d;&#x27;&#x29;&#xd;&#xa;                        .replace&#x28;&#x2f;&#x28;&#x3f;&#x3a;&#x5e;&#x7c;&#x3a;&#x7c;,&#x29;&#x28;&#x3f;&#x3a;&#x5c;s&#x2a;&#x5c;&#x5b;&#x29;&#x2b;&#x2f;g, &#x27;&#x27;&#x29;&#x29;&#x29; &#x7b;&#xd;&#xa;&#xd;&#xa;&#x2f;&#x2f; In the third stage we use the eval function to compile the text into a&#xd;&#xa;&#x2f;&#x2f; JavaScript structure. The &#x27;&#x7b;&#x27; operator is subject to a syntactic ambiguity&#xd;&#xa;&#x2f;&#x2f; in JavaScript&#x3a; it can begin a block or an object literal. We wrap the text&#xd;&#xa;&#x2f;&#x2f; in parens to eliminate the ambiguity.&#xd;&#xa;&#xd;&#xa;                j &#x3d; eval&#x28;&#x27;&#x28;&#x27; &#x2b; text &#x2b; &#x27;&#x29;&#x27;&#x29;&#x3b;&#xd;&#xa;&#xd;&#xa;&#x2f;&#x2f; In the optional fourth stage, we recursively walk the new structure, passing&#xd;&#xa;&#x2f;&#x2f; each name&#x2f;value pair to a reviver function for possible transformation.&#xd;&#xa;&#xd;&#xa;                return typeof reviver &#x3d;&#x3d;&#x3d; &#x27;function&#x27;&#xd;&#xa;                    &#x3f; walk&#x28;&#x7b;&#x27;&#x27;&#x3a; j&#x7d;, &#x27;&#x27;&#x29;&#xd;&#xa;                    &#x3a; j&#x3b;&#xd;&#xa;            &#x7d;&#xd;&#xa;&#xd;&#xa;&#x2f;&#x2f; If the text is not JSON parseable, then a SyntaxError is thrown.&#xd;&#xa;&#xd;&#xa;            throw new SyntaxError&#x28;&#x27;JSON.parse&#x27;&#x29;&#x3b;&#xd;&#xa;        &#x7d;&#x3b;&#xd;&#xa;    &#x7d;&#xd;&#xa;&#x7d;&#x28;&#x29;&#x29;&#x3b;&#xd;&#xa;&#x2f;&#x2f;Script here&#xd;&#xa;&#xd;&#xa;function getFromMap&#x28;key,jsonRow&#x29;&#x7b;&#xd;&#xa;  try&#x7b;&#xd;&#xa;   var map &#x3d; JSON.parse&#x28;jsonRow&#x29;&#x3b;&#xd;&#xa;  &#x7d;&#xd;&#xa;  catch&#x28;e&#x29;&#x7b;&#xd;&#xa;   var message &#x3d; &#x22;Unparsable JSON&#x3a; &#x22;&#x2b;jsonRow&#x2b;&#x22; Desc&#x3a; &#x22;&#x2b;e.message&#x3b;&#xd;&#xa;   var nr_errors &#x3d; 1&#x3b;&#xd;&#xa;   var field &#x3d; &#x22;jsonRow&#x22;&#x3b;&#xd;&#xa;   var errcode &#x3d; &#x22;JSON_PARSE&#x22;&#x3b;&#xd;&#xa;   &#x2f;&#x2f;_step_.putError&#x28;getInputRowMeta&#x28;&#x29;, row, nr_errors, message, field, errcode&#x29;&#x3b;&#xd;&#xa;   trans_Status &#x3d; SKIP_TRANSFORMATION&#x3b;&#xd;&#xa;   return null&#x3b;&#xd;&#xa;  &#x7d;&#xd;&#xa;&#xd;&#xa;  if&#x28;map&#x5b;key&#x5d; &#x3d;&#x3d; undefined&#x29;&#x7b;&#xd;&#xa;   return null&#x3b;&#xd;&#xa;  &#x7d;&#xd;&#xa;  trans_Status &#x3d; CONTINUE_TRANSFORMATION&#x3b;&#xd;&#xa;  return map&#x5b;key&#x5d;&#xd;&#xa;&#x7d;&#x3b;&#xd;&#xa;</jsScript_script>
      </jsScript>    </jsScripts>    <fields>      <field>        <name>id</name>
        <rename>id</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>status</name>
        <rename>status</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>genres</name>
        <rename>genres</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>title</name>
        <rename>title</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>members_score</name>
        <rename>members_score</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>type</name>
        <rename>type</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>start_date</name>
        <rename>start_date</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>end_date</name>
        <rename>end_date</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>episodes</name>
        <rename>episodes</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>classification</name>
        <rename>classification</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>    </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>373</xloc>
      <yloc>330</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>PostgreSQL Bulk Loader</name>
    <type>PGBulkLoader</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <connection>PreferenceDB</connection>
    <schema>preferences</schema>
    <table>shows</table>
    <load_action>INSERT</load_action>
    <PsqlPath>c&#x3a;&#x5c;PROGRA&#x7e;1&#x5c;PostgreSQL&#x5c;9.3&#x5c;bin&#x5c;psql.exe</PsqlPath>
    <dbname_override/>
    <enclosure>&#x22;</enclosure>
    <delimiter>&#x3b;</delimiter>
    <stop_on_error>N</stop_on_error>
      <mapping>
        <stream_name>status</stream_name>
        <field_name>status</field_name>
        <date_mask/>
      </mapping>
      <mapping>
        <stream_name>title</stream_name>
        <field_name>title</field_name>
        <date_mask/>
      </mapping>
      <mapping>
        <stream_name>episodes</stream_name>
        <field_name>episodes</field_name>
        <date_mask/>
      </mapping>
      <mapping>
        <stream_name>classification</stream_name>
        <field_name>classification</field_name>
        <date_mask/>
      </mapping>
      <mapping>
        <stream_name>showid</stream_name>
        <field_name>id</field_name>
        <date_mask/>
      </mapping>
      <mapping>
        <stream_name>averagememberscore</stream_name>
        <field_name>members_score</field_name>
        <date_mask/>
      </mapping>
      <mapping>
        <stream_name>showtype</stream_name>
        <field_name>type</field_name>
        <date_mask/>
      </mapping>
      <mapping>
        <stream_name>startdate</stream_name>
        <field_name>start_date</field_name>
        <date_mask/>
      </mapping>
      <mapping>
        <stream_name>enddate</stream_name>
        <field_name>end_date</field_name>
        <date_mask/>
      </mapping>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>631</xloc>
      <yloc>323</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Text file input</name>
    <type>TextFileInput</type>
    <description/>
    <distribute>Y</distribute>
    <custom_distribution/>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <accept_filenames>N</accept_filenames>
    <passing_through_fields>N</passing_through_fields>
    <accept_field/>
    <accept_stepname/>
    <separator>&#x3b;</separator>
    <enclosure>&#x22;</enclosure>
    <enclosure_breaks>N</enclosure_breaks>
    <escapechar/>
    <header>Y</header>
    <nr_headerlines>1</nr_headerlines>
    <footer>N</footer>
    <nr_footerlines>1</nr_footerlines>
    <line_wrapped>N</line_wrapped>
    <nr_wraps>1</nr_wraps>
    <layout_paged>N</layout_paged>
    <nr_lines_per_page>80</nr_lines_per_page>
    <nr_lines_doc_header>0</nr_lines_doc_header>
    <noempty>Y</noempty>
    <include>N</include>
    <include_field/>
    <rownum>N</rownum>
    <rownumByFile>N</rownumByFile>
    <rownum_field/>
    <format>DOS</format>
    <encoding/>
    <add_to_result_filenames>Y</add_to_result_filenames>
    <file>
      <name>&#x24;&#x7b;Internal.Transformation.Filename.Directory&#x7d;&#x2f;input&#x2f;anime.js</name>
      <filemask/>
      <exclude_filemask/>
      <file_required>N</file_required>
      <include_subfolders>N</include_subfolders>
      <name/>
      <filemask/>
      <exclude_filemask/>
      <file_required>N</file_required>
      <include_subfolders>N</include_subfolders>
      <type>CSV</type>
      <compression>None</compression>
    </file>
    <filters>
    </filters>
    <fields>
      <field>
        <name>line</name>
        <type>String</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <nullif/>
        <ifnull/>
        <position>-1</position>
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
    </fields>
    <limit>0</limit>
    <error_ignored>N</error_ignored>
    <skip_bad_files>N</skip_bad_files>
    <file_error_field/>
    <file_error_message_field/>
    <error_line_skipped>N</error_line_skipped>
    <error_count_field/>
    <error_fields_field/>
    <error_text_field/>
    <bad_line_files_destination_directory/>
    <bad_line_files_extension>warning</bad_line_files_extension>
    <error_line_files_destination_directory/>
    <error_line_files_extension>error</error_line_files_extension>
    <line_number_files_destination_directory/>
    <line_number_files_extension>line</line_number_files_extension>
    <date_format_lenient>Y</date_format_lenient>
    <date_format_locale>en_US</date_format_locale>
    <shortFileFieldName/>
    <pathFieldName/>
    <hiddenFieldName/>
    <lastModificationTimeFieldName/>
    <uriNameFieldName/>
    <rootUriNameFieldName/>
    <extensionFieldName/>
    <sizeFieldName/>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>218</xloc>
      <yloc>329</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step_error_handling>
  </step_error_handling>
   <slave-step-copy-partition-distribution>
</slave-step-copy-partition-distribution>
   <slave_transformation>N</slave_transformation>

</transformation>
